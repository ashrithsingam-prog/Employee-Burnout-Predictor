{% extends "base.html" %}
{% block title %}Sign In ‚Äî BurnShield{% endblock %}

{% block fullpage %}
<div class="login-page">

    <!-- LEFT ‚Äî Hero -->
    <div class="login-left">
        <div style="position:relative;z-index:1">
            <div class="sidebar-brand" style="border:none;padding:0;margin-bottom:2.5rem">
                <div class="brand-icon">üõ°</div>
                <div>
                    <div class="brand-text">BurnShield</div>
                    <div class="brand-sub">Wellness Platform</div>
                </div>
            </div>

            <h1 style="font-size:2.4rem;max-width:320px">Protect Your Team's <em>Wellbeing</em></h1>
            <p style="margin-top:1rem;max-width:380px;font-size:.95rem">
                Data-driven burnout prediction and monitoring.
                Track stress levels, identify risks early, and take meaningful action.
            </p>

            <div class="login-features">
                <div class="login-feature"><span>üìä</span> Real-time burnout risk scoring</div>
                <div class="login-feature"><span>üí¨</span> Communication sentiment analysis</div>
                <div class="login-feature"><span>üîç</span> Anti-faking detection system</div>
                <div class="login-feature"><span>üì©</span> Anonymous peer concern reporting</div>
            </div>
        </div>
    </div>

    <!-- RIGHT ‚Äî Login Form -->
    <div class="login-right">
        <div class="login-form">
            <h2 style="margin-bottom:.4rem">Welcome Back</h2>
            <p id="login-subtitle" style="margin-bottom:1.5rem">Enter your ID to access the platform</p>

            <!-- Toggle Buttons -->
            <div style="display:flex;gap:.4rem;margin-bottom:1.8rem">
                <button type="button" id="btn-emp" onclick="switchMode('employee')" style="flex:1;padding:.65rem .6rem;border-radius:10px;font-size:.78rem;font-weight:600;cursor:pointer;
                    border:2px solid var(--accent);background:var(--accent);color:#fff;
                    transition:all .25s ease;display:flex;align-items:center;justify-content:center;gap:.3rem">
                    üë§ Employee
                </button>
                <button type="button" id="btn-mgr" onclick="switchMode('manager')" style="flex:1;padding:.65rem .6rem;border-radius:10px;font-size:.78rem;font-weight:600;cursor:pointer;
                    border:2px solid var(--border);background:var(--surface2);color:var(--text-main);
                    transition:all .25s ease;display:flex;align-items:center;justify-content:center;gap:.3rem">
                    ÔøΩ Manager
                </button>
                <button type="button" id="btn-hr" onclick="switchMode('hr')" style="flex:1;padding:.65rem .6rem;border-radius:10px;font-size:.78rem;font-weight:600;cursor:pointer;
                    border:2px solid var(--border);background:var(--surface2);color:var(--text-main);
                    transition:all .25s ease;display:flex;align-items:center;justify-content:center;gap:.3rem">
                    üõ°Ô∏è HR
                </button>
            </div>

            {% if error %}
            <div class="form-error">{{ error }}</div>
            {% endif %}

            <form method="POST" action="{{ url_for('login') }}">
                <div class="form-group">
                    <label for="emp_id" id="login-label">Employee ID</label>
                    <input type="text" id="emp_id" name="emp_id" placeholder="e.g. EMP001" required autocomplete="off"
                        autofocus style="margin-bottom:0">
                </div>
                <button type="submit" class="btn btn-block" id="login-btn" style="margin-top:1.2rem">Sign In as Employee
                    ‚Üí</button>
            </form>

            <div class="login-hint" id="login-hint">
                Use IDs: <strong>EMP001 ‚Äì EMP015</strong>
            </div>
        </div>
    </div>

    <script>
        function switchMode(mode) {
            const btnEmp = document.getElementById('btn-emp');
            const btnMgr = document.getElementById('btn-mgr');
            const btnHr = document.getElementById('btn-hr');
            const label = document.getElementById('login-label');
            const input = document.getElementById('emp_id');
            const hint = document.getElementById('login-hint');
            const subtitle = document.getElementById('login-subtitle');
            const loginBtn = document.getElementById('login-btn');

            // Reset all buttons to inactive
            [btnEmp, btnMgr, btnHr].forEach(btn => {
                btn.style.background = 'var(--surface2)';
                btn.style.color = 'var(--text-main)';
                btn.style.borderColor = 'var(--border)';
            });

            if (mode === 'hr') {
                btnHr.style.background = 'var(--accent)';
                btnHr.style.color = '#fff';
                btnHr.style.borderColor = 'var(--accent)';
                label.textContent = 'HR ID';
                input.placeholder = 'e.g. HR001';
                hint.innerHTML = 'Use IDs: <strong>HR001 ‚Äì HR005</strong>';
                subtitle.textContent = 'Enter your HR ID to access the management dashboard';
                loginBtn.textContent = 'Sign In as HR ‚Üí';
            } else if (mode === 'manager') {
                btnMgr.style.background = 'var(--accent)';
                btnMgr.style.color = '#fff';
                btnMgr.style.borderColor = 'var(--accent)';
                label.textContent = 'Manager ID';
                input.placeholder = 'e.g. MGR001';
                hint.innerHTML = 'Use IDs: <strong>MGR001 ‚Äì MGR005</strong>';
                subtitle.textContent = 'Enter your Manager ID to access your dashboard';
                loginBtn.textContent = 'Sign In as Manager ‚Üí';
            } else {
                btnEmp.style.background = 'var(--accent)';
                btnEmp.style.color = '#fff';
                btnEmp.style.borderColor = 'var(--accent)';
                label.textContent = 'Employee ID';
                input.placeholder = 'e.g. EMP001';
                hint.innerHTML = 'Use IDs: <strong>EMP001 ‚Äì EMP015</strong>';
                subtitle.textContent = 'Enter your ID to access the platform';
                loginBtn.textContent = 'Sign In as Employee ‚Üí';
            }
            input.value = '';
            input.focus();
        }
    </script>
</div>
{% endblock %}